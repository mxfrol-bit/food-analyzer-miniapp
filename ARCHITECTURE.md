# üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

## üìä –í–´–°–û–ö–û–£–†–û–í–ù–ï–í–ê–Ø –°–•–ï–ú–ê

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    TELEGRAM USER                        ‚îÇ
‚îÇ                     (–ú–æ–±–∏–ª—å–Ω—ã–π)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              TELEGRAM MINI APP (Frontend)               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  React 18 + Vite + Zustand                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –µ–¥—ã                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–Ω–µ–≤–Ω–∏–∫–∞                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞                                    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                          ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  –î–µ–ø–ª–æ–π: Vercel (FREE)                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ HTTPS/REST API
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 BACKEND API (Node.js)                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  Express.js Server                               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ /api/auth       (Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ /api/food       (–ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ)              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ /api/meal       (–î–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è)          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ /api/composition (OCR –∞–Ω–∞–ª–∏–∑)              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ /api/profile    (–ü—Ä–æ—Ñ–∏–ª—å)                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ /api/recommendations (–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)        ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  –î–µ–ø–ª–æ–π: Render (FREE 750 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü)                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ              ‚îÇ              ‚îÇ
       ‚ñº              ‚ñº              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Supabase   ‚îÇ ‚îÇ  Gemini AI   ‚îÇ ‚îÇ Tesseract.js ‚îÇ
‚îÇ PostgreSQL  ‚îÇ ‚îÇ  (Google)    ‚îÇ ‚îÇ    (OCR)     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - Users     ‚îÇ ‚îÇ –ê–Ω–∞–ª–∏–∑ –µ–¥—ã   ‚îÇ ‚îÇ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞-  ‚îÇ
‚îÇ - Meals     ‚îÇ ‚îÇ –ø–æ —Ñ–æ—Ç–æ      ‚îÇ ‚îÇ –Ω–∏–µ —Ç–µ–∫—Å—Ç–∞   ‚îÇ
‚îÇ - Products  ‚îÇ ‚îÇ              ‚îÇ ‚îÇ —Å —ç—Ç–∏–∫–µ—Ç–æ–∫   ‚îÇ
‚îÇ - Analysis  ‚îÇ ‚îÇ FREE:        ‚îÇ ‚îÇ              ‚îÇ
‚îÇ             ‚îÇ ‚îÇ 60 req/min   ‚îÇ ‚îÇ FREE 100%    ‚îÇ
‚îÇ FREE:       ‚îÇ ‚îÇ              ‚îÇ ‚îÇ              ‚îÇ
‚îÇ 500MB       ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ –ü–û–¢–û–ö –î–ê–ù–ù–´–•

### 1Ô∏è‚É£ –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ –µ–¥—ã:
```
User —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–µ—Ç –µ–¥—É
    ‚Üì
Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –Ω–∞ /api/food/analyze
    ‚Üì
Backend –ø–æ–ª—É—á–∞–µ—Ç —Ñ–æ—Ç–æ
    ‚Üì
Sharp –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä)
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ (–µ—Å—Ç—å –ª–∏ —É–∂–µ –∞–Ω–∞–ª–∏–∑ –ø–æ—Ö–æ–∂–µ–≥–æ —Ñ–æ—Ç–æ?)
    ‚îú‚îÄ –î–ê ‚Üí –í–æ–∑–≤—Ä–∞—Ç –∏–∑ –∫–µ—à–∞ (—ç–∫–æ–Ω–æ–º–∏—è!)
    ‚îî‚îÄ –ù–ï–¢ ‚Üí ‚Üì
–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Gemini AI
    ‚Üì
Gemini –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –∫–∞–ª–æ—Ä–∏—è–º–∏/–ë–ñ–£
    ‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à (–¥–ª—è –±—É–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
    ‚Üì
–í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ Frontend
    ‚Üì
User –≤–∏–¥–∏—Ç –∞–Ω–∞–ª–∏–∑ –∏ –º–æ–∂–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –¥–Ω–µ–≤–Ω–∏–∫
```

### 2Ô∏è‚É£ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –¥–Ω–µ–≤–Ω–∏–∫:
```
User –Ω–∞–∂–∏–º–∞–µ—Ç "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
    ‚Üì
Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ /api/meal/add
    ‚Üì
Backend –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
    ‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Supabase —Ç–∞–±–ª–∏—Ü—É 'meals'
    ‚Üì
–í–æ–∑–≤—Ä–∞—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    ‚Üì
Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–Ω–µ–≤–Ω–∏–∫
```

### 3Ô∏è‚É£ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram:
```
User –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Mini App
    ‚Üì
Telegram –ø–µ—Ä–µ–¥–∞–µ—Ç initData (–ø–æ–¥–ø–∏—Å—å)
    ‚Üì
Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç initData –≤ /api/auth/validate
    ‚Üì
Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å (HMAC-SHA256)
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ ‚Üí –ø–æ–∏—Å–∫/—Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
    ‚Üì
–í–æ–∑–≤—Ä–∞—Ç —Ç–æ–∫–µ–Ω–∞ —Å–µ—Å—Å–∏–∏
    ‚Üì
Frontend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```

---

## üóÑÔ∏è –°–•–ï–ú–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    users     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id           ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ telegram_id  ‚îÇ      ‚îÇ
‚îÇ username     ‚îÇ      ‚îÇ FOREIGN KEY
‚îÇ first_name   ‚îÇ      ‚îÇ
‚îÇ age          ‚îÇ      ‚îÇ
‚îÇ weight       ‚îÇ      ‚îÇ
‚îÇ height       ‚îÇ      ‚îÇ
‚îÇ goal         ‚îÇ      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
                      ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ    meals     ‚îÇ      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§      ‚îÇ
‚îÇ id           ‚îÇ      ‚îÇ
‚îÇ user_id      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ dish_name    ‚îÇ
‚îÇ calories     ‚îÇ
‚îÇ protein      ‚îÇ
‚îÇ carbs        ‚îÇ
‚îÇ fats         ‚îÇ
‚îÇ meal_date    ‚îÇ
‚îÇ meal_type    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ composition_       ‚îÇ
‚îÇ    analysis        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id                 ‚îÇ
‚îÇ user_id            ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ detected_text      ‚îÇ      ‚îÇ
‚îÇ ingredients[]      ‚îÇ      ‚îÇ
‚îÇ e_additives[]      ‚îÇ      ‚îÇ
‚îÇ health_score       ‚îÇ      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
                            ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ  ai_cache    ‚îÇ            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§            ‚îÇ
‚îÇ cache_key    ‚îÇ            ‚îÇ
‚îÇ response_data‚îÇ            ‚îÇ
‚îÇ expires_at   ‚îÇ            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
                            ‚îÇ
–í—Å–µ–≥–æ 11 —Ç–∞–±–ª–∏—Ü             ‚îÇ
(–ø–æ–∫–∞–∑–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ)         ‚îÇ
```

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
1. User –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Mini App
2. Telegram –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `initData` —Å –ø–æ–¥–ø–∏—Å—å—é
3. Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ HMAC-SHA256
4. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –±–æ—Ç–∞
5. –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ –∏ replay-–∞—Ç–∞–∫

### API –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è frontend –¥–æ–º–µ–Ω–∞
- ‚úÖ Rate limiting (100 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ SQL injection –∑–∞—â–∏—Ç–∞ (Supabase)
- ‚úÖ XSS –∑–∞—â–∏—Ç–∞ (React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üíæ –ö–ï–®–ò–†–û–í–ê–ù–ò–ï (–≠–ö–û–ù–û–ú–ò–Ø –î–ï–ù–ï–ì!)

### –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–µ—à:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Memory Cache   ‚îÇ  ‚Üê –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π (in-memory)
‚îÇ  (Map object)   ‚îÇ    TTL: 5 –º–∏–Ω—É—Ç
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ Cache Miss
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Database Cache  ‚îÇ  ‚Üê –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π
‚îÇ  (Supabase)     ‚îÇ    TTL: 7 –¥–Ω–µ–π
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ Cache Miss
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Gemini API    ‚îÇ  ‚Üê –î–æ—Ä–æ–≥–æ (–Ω–æ FREE)
‚îÇ  (Google AI)    ‚îÇ    –í—ã–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ß—Ç–æ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è:
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ –µ–¥—ã (7 –¥–Ω–µ–π)
- ‚úÖ –ù–µ–¥–µ–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è (7 –¥–Ω–µ–π)
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (24 —á–∞—Å–∞)
- ‚úÖ OCR —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (7 –¥–Ω–µ–π)

### –≠–∫–æ–Ω–æ–º–∏—è:
- –ë–µ–∑ –∫–µ—à–∞: ~1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å = –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ FREE –ª–∏–º–∏—Ç–∞
- –° –∫–µ—à–µ–º: ~50-100 –Ω–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å = –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–∞

---

## ‚ö° –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
```javascript
// Sharp —É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–æ—Ç–æ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ AI
Original: 3MB (3000x4000px)
    ‚Üì Sharp
Optimized: 200KB (800x800px, quality 80%)
    ‚Üì
–≠–∫–æ–Ω–æ–º–∏—è 93% —Ç—Ä–∞—Ñ–∏–∫–∞!
```

### 2. –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è AI –ø—Ä–æ–º–ø—Ç–æ–≤:
```javascript
// –ü–ª–æ—Ö–æ (–º–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–æ–≤):
"Please analyze this food image and tell me..."

// –•–æ—Ä–æ—à–æ (–º–∞–ª–æ —Ç–æ–∫–µ–Ω–æ–≤):
"Analyze food. Return JSON: {...}"

–≠–∫–æ–Ω–æ–º–∏—è ~70% —Ç–æ–∫–µ–Ω–æ–≤!
```

### 3. Batch –∑–∞–ø—Ä–æ—Å—ã:
```javascript
// –í–º–µ—Å—Ç–æ 7 –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
// –î–µ–ª–∞–µ–º 1 –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—Å—é –Ω–µ–¥–µ–ª—é
–≠–∫–æ–Ω–æ–º–∏—è 85% –∑–∞–ø—Ä–æ—Å–æ–≤!
```

---

## üìà –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï

### –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã:
```
Render:      750 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü  = ~1040 —á–∞—Å–æ–≤ —Ä–µ–∞–ª—å–Ω–æ–≥–æ uptime
Vercel:      100GB/–º–µ—Å—è—Ü      = ~100K –≤–∏–∑–∏—Ç–æ–≤
Supabase:    500MB –ë–î         = ~50K –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
Gemini:      60 req/min       = ~2.5M –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü
```

### –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–ª–∞—Ç–∏—Ç—å:
- Render: –ø—Ä–∏ > 750 —á–∞—Å–æ–≤ (–¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Å–µ—Ä–≤–µ—Ä–æ–≤)
- Vercel: –ø—Ä–∏ > 100GB (–æ–±–Ω–æ–≤–∏—Ç—å—Å—è –¥–æ Pro $20/–º–µ—Å)
- Supabase: –ø—Ä–∏ > 500MB (–æ–±–Ω–æ–≤–∏—Ç—å—Å—è –¥–æ Pro $25/–º–µ—Å)
- Gemini: FREE –Ω–∞–≤—Å–µ–≥–¥–∞ (–∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ paid –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤)

### –†–∞—Å—á–µ—Ç–Ω–∞—è –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å FREE tier:
- **~1,000 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å**
- **~10,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å**
- **–°—Ä–æ–∫ —Ä–∞–±–æ—Ç—ã: –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ**

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### Backend:
- **Framework:** Express.js 4.x
- **Runtime:** Node.js 18+
- **Database ORM:** Supabase client (PostgreSQL)
- **Image processing:** Sharp
- **OCR:** Tesseract.js
- **AI:** Google Generative AI SDK

### Frontend:
- **Framework:** React 18
- **Build tool:** Vite 5
- **State management:** Zustand
- **Routing:** React Router v6
- **HTTP client:** Axios
- **Telegram SDK:** @telegram-apps/sdk

### –î–µ–ø–ª–æ–π:
- **Backend:** Render (Docker container)
- **Frontend:** Vercel (Static hosting)
- **Database:** Supabase (Managed PostgreSQL)
- **CDN:** Cloudflare (—á–µ—Ä–µ–∑ Vercel)

---

## üéØ PERFORMANCE

### –ú–µ—Ç—Ä–∏–∫–∏:
- **API Response time:** < 200ms (–±–µ–∑ AI)
- **AI Response time:** 2-5 —Å–µ–∫—É–Ω–¥ (—Å –∫–µ—à–µ–º: < 100ms)
- **OCR Response time:** 3-10 —Å–µ–∫—É–Ω–¥
- **Frontend Load time:** < 2 —Å–µ–∫—É–Ω–¥—ã
- **Database queries:** < 50ms

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚úÖ Gzip —Å–∂–∞—Ç–∏–µ
- ‚úÖ Image optimization (Sharp)
- ‚úÖ Code splitting (Vite)
- ‚úÖ Lazy loading
- ‚úÖ Database indexes
- ‚úÖ Connection pooling

---

## üöÄ DEPLOYMENT PIPELINE

```
Code ‚Üí GitHub ‚Üí –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π
         ‚îÇ
         ‚îú‚îÄ‚Üí Render (Backend)
         ‚îÇ   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∏–ª–¥
         ‚îÇ   - Health checks
         ‚îÇ   - Auto-restart –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
         ‚îÇ
         ‚îî‚îÄ‚Üí Vercel (Frontend)
             - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∏–ª–¥
             - CDN deployment
             - Preview deployments
```

---

**–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ì–û–¢–û–í–ê –ö PRODUCTION! üèÜ**
